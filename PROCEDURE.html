<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>福润堂 存储过程测试</title>
  
  <link rel="stylesheet" href="css/app.css">
  
  <script type="text/javascript" src="lib/angular.js"></script>
 
  
</head>
<body ng-app="pApp" ng-controller="Ctrl" >
  <h1 style="">
    福润堂 存储过程测试 
    <button ng-click="getProcedure()" > 调用存储过程 </button>
    </h1>

    {{result}}

<script type="text/javascript">

var pApp = angular.module('pApp', []);

function Ctrl($scope ) {
  $scope.result = "abcd";


  $scope.getProcedure = function() {
    var mysql = require('mysql');

    var conn = mysql.createConnection({
                                        host: 'localhost',
                                        user: 'root',
                                        password: '',
                                        database:'frt',
                                        port: 3306,
                                        multipleStatements: true});

    
    conn.connect();
    conn.query("call get_history_recipe('13991312345')", function(err, results) {
      if (err) {
        console.log("Error: " + err);
        throw err;
      }
      // `results` is an array with one element for every statement in the query:
      console.log(results[0]); // [{1: 1}]
      
    });
  
    conn.end();

         
  }

}


</script>
</body>
</html>




